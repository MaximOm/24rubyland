<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruby.js - –¢–µ—Å—Ç</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: white;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .test-section {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .test-button {
            background: #C1002A;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            background: #ff1a5e;
            transform: translateY(-2px);
        }
        
        .status {
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-family: monospace;
        }
        
        .status.success { background: rgba(40, 167, 69, 0.2); }
        .status.error { background: rgba(220, 53, 69, 0.2); }
        .status.info { background: rgba(23, 162, 184, 0.2); }
        
        .demo-element {
            background: rgba(255,255,255,0.1);
            padding: 2rem;
            margin: 1rem 0;
            border-radius: 8px;
            text-align: center;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –∏–∑ ruby.js */
        [data-animation="fade-in"] {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }
        
        [data-animation="slide-up"] {
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s ease;
        }
        
        [data-animation="scale-in"] {
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.6s ease;
        }
        
        [data-animation].animated {
            opacity: 1;
            transform: none;
        }
        
        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .lang-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            margin: 0 4px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .lang-btn.active {
            background: #C1002A;
            border-color: #C1002A;
        }
    </style>
</head>
<body>
    <div class="language-selector">
        <button class="lang-btn active" onclick="testLanguage('ru')">RU</button>
        <button class="lang-btn" onclick="testLanguage('en')">EN</button>
    </div>

    <div class="container">
        <h1 data-i18n="test_title">üß™ Ruby.js - –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h1>
        
        <div class="status info" id="status">
            <strong>–°—Ç–∞—Ç—É—Å:</strong> –ó–∞–≥—Ä—É–∑–∫–∞ Ruby.js...
        </div>

        <!-- –¢–µ—Å—Ç –∞–Ω–∏–º–∞—Ü–∏–π -->
        <div class="test-section">
            <h2 data-i18n="test_animations">üé¨ –¢–µ—Å—Ç –∞–Ω–∏–º–∞—Ü–∏–π</h2>
            <p data-i18n="test_animations_desc">–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∑–æ–Ω–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏:</p>
            
            <div class="demo-element" data-animation="fade-in" style="margin-top: 100vh;">
                <h3 data-i18n="animation_fade">‚ú® –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è (fade-in)</h3>
            </div>
            
            <div class="demo-element" data-animation="slide-up">
                <h3 data-i18n="animation_slide">üöÄ –ê–Ω–∏–º–∞—Ü–∏—è —Å–ª–∞–π–¥–∞ (slide-up)</h3>
            </div>
            
            <div class="demo-element" data-animation="scale-in">
                <h3 data-i18n="animation_scale">üìà –ê–Ω–∏–º–∞—Ü–∏—è –º–∞—Å—à—Ç–∞–±–∞ (scale-in)</h3>
            </div>
        </div>

        <!-- –¢–µ—Å—Ç i18n -->
        <div class="test-section">
            <h2 data-i18n="test_i18n">üåç –¢–µ—Å—Ç –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏</h2>
            <p data-i18n="test_i18n_desc">–¢–µ–∫—É—â–∏–π —è–∑—ã–∫: <span id="current-lang">ru</span></p>
            
            <button class="test-button" onclick="testSetLanguage('en')" data-i18n="btn_switch_en">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ English</button>
            <button class="test-button" onclick="testSetLanguage('ru')" data-i18n="btn_switch_ru">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –†—É—Å—Å–∫–∏–π</button>
            
            <div id="i18n-status" class="status info">
                <span data-i18n="i18n_ready">i18n —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞</span>
            </div>
        </div>

        <!-- –¢–µ—Å—Ç API -->
        <div class="test-section">
            <h2 data-i18n="test_api">üîß –¢–µ—Å—Ç Ruby.js API</h2>
            <p data-i18n="test_api_desc">–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:</p>
            
            <button class="test-button" onclick="testAPI()">–¢–µ—Å—Ç API</button>
            <button class="test-button" onclick="testUtils()">–¢–µ—Å—Ç —É—Ç–∏–ª–∏—Ç</button>
            <button class="test-button" onclick="testAnimations()">–¢–µ—Å—Ç –∞–Ω–∏–º–∞—Ü–∏–π</button>
            
            <div id="api-results" class="status info">
                <span data-i18n="click_test">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</span>
            </div>
        </div>

        <!-- –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ -->
        <div class="test-section">
            <h2 data-i18n="test_performance">‚ö° –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h2>
            <p data-i18n="test_performance_desc">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏:</p>
            
            <div id="performance-results">
                <div data-i18n="loading_time">–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏: <span id="load-time">–∏–∑–º–µ—Ä—è–µ—Ç—Å—è...</span></div>
                <div data-i18n="memory_usage">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏: <span id="memory-usage">–∏–∑–º–µ—Ä—è–µ—Ç—Å—è...</span></div>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Ruby.js -->
    <script src="ruby.js?test=1"></script>
    
    <!-- –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ -->
    <script>
        // –ü–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        const testTranslations = {
            ru: {
                test_title: "üß™ Ruby.js - –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞",
                test_animations: "üé¨ –¢–µ—Å—Ç –∞–Ω–∏–º–∞—Ü–∏–π",
                test_animations_desc: "–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∑–æ–Ω–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏:",
                animation_fade: "‚ú® –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è (fade-in)",
                animation_slide: "üöÄ –ê–Ω–∏–º–∞—Ü–∏—è —Å–ª–∞–π–¥–∞ (slide-up)",
                animation_scale: "üìà –ê–Ω–∏–º–∞—Ü–∏—è –º–∞—Å—à—Ç–∞–±–∞ (scale-in)",
                test_i18n: "üåç –¢–µ—Å—Ç –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏",
                test_i18n_desc: "–¢–µ–∫—É—â–∏–π —è–∑—ã–∫:",
                btn_switch_en: "–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ English",
                btn_switch_ru: "–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –†—É—Å—Å–∫–∏–π",
                i18n_ready: "i18n —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞",
                test_api: "üîß –¢–µ—Å—Ç Ruby.js API",
                test_api_desc: "–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:",
                click_test: "–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è",
                test_performance: "‚ö° –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏",
                test_performance_desc: "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏:",
                loading_time: "–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏:",
                memory_usage: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:"
            },
            en: {
                test_title: "üß™ Ruby.js - Test Page",
                test_animations: "üé¨ Animation Tests",
                test_animations_desc: "Scroll down to see animations when elements come into view:",
                animation_fade: "‚ú® Fade-in Animation",
                animation_slide: "üöÄ Slide-up Animation", 
                animation_scale: "üìà Scale-in Animation",
                test_i18n: "üåç Internationalization Test",
                test_i18n_desc: "Current language:",
                btn_switch_en: "Switch to English",
                btn_switch_ru: "Switch to Russian",
                i18n_ready: "i18n system ready",
                test_api: "üîß Ruby.js API Test",
                test_api_desc: "Testing global functions availability:",
                click_test: "Click buttons to test",
                test_performance: "‚ö° Performance Test",
                test_performance_desc: "Loading time comparison:",
                loading_time: "Loading time:",
                memory_usage: "Memory usage:"
            }
        };

        let startTime = performance.now();
        let currentTestLang = 'ru';

        // –§—É–Ω–∫—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        function updateStatus(message, type = 'info') {
            const status = document.getElementById('status');
            status.className = `status ${type}`;
            status.innerHTML = `<strong>–°—Ç–∞—Ç—É—Å:</strong> ${message}`;
        }

        function testLanguage(lang) {
            currentTestLang = lang;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–µ—Ä–µ–≤–æ–¥—ã
            applyTestTranslations(lang);
            document.getElementById('current-lang').textContent = lang;
        }

        function applyTestTranslations(lang) {
            const translations = testTranslations[lang];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[key]) {
                    el.textContent = translations[key];
                }
            });
        }

        function testSetLanguage(lang) {
            if (window.Ruby && window.Ruby.i18n) {
                window.Ruby.i18n.setLanguage(lang);
                updateStatus(`–Ø–∑—ã–∫ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ ${lang}`, 'success');
            } else {
                updateStatus('Ruby.js API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ', 'error');
            }
        }

        function testAPI() {
            const results = document.getElementById('api-results');
            let output = '';
            
            if (typeof window.Ruby !== 'undefined') {
                output += '‚úÖ window.Ruby –¥–æ—Å—Ç—É–ø–µ–Ω<br>';
                output += `‚úÖ i18n: ${typeof window.Ruby.i18n}<br>`;
                output += `‚úÖ utils: ${typeof window.Ruby.utils}<br>`;
                output += `‚úÖ animations: ${typeof window.Ruby.animations}<br>`;
                results.className = 'status success';
            } else {
                output = '‚ùå window.Ruby –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω';
                results.className = 'status error';
            }
            
            results.innerHTML = output;
        }

        function testUtils() {
            const results = document.getElementById('api-results');
            
            if (window.Ruby && window.Ruby.utils) {
                const isMobile = window.Ruby.utils.isMobile();
                const supportsIO = window.Ruby.utils.supportsIntersectionObserver();
                
                results.innerHTML = `
                    ‚úÖ isMobile(): ${isMobile}<br>
                    ‚úÖ supportsIntersectionObserver(): ${supportsIO}<br>
                    ‚úÖ debounce: ${typeof window.Ruby.utils.debounce}
                `;
                results.className = 'status success';
            } else {
                results.innerHTML = '‚ùå Ruby.utils –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω';
                results.className = 'status error';
            }
        }

        function testAnimations() {
            const results = document.getElementById('api-results');
            
            if (window.Ruby && window.Ruby.animations) {
                results.innerHTML = `
                    ‚úÖ initWebflowAnimations: ${typeof window.Ruby.animations.initWebflowAnimations}<br>
                    ‚úÖ initHeroParallax: ${typeof window.Ruby.animations.initHeroParallax}
                `;
                results.className = 'status success';
            } else {
                results.innerHTML = '‚ùå Ruby.animations –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω';
                results.className = 'status error';
            }
        }

        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
        window.addEventListener('load', function() {
            const loadTime = Math.round(performance.now() - startTime);
            document.getElementById('load-time').textContent = `${loadTime}ms`;
            
            // –ü–∞–º—è—Ç—å (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
            if (performance.memory) {
                const memoryMB = Math.round(performance.memory.usedJSHeapSize / 1024 / 1024);
                document.getElementById('memory-usage').textContent = `${memoryMB}MB`;
            } else {
                document.getElementById('memory-usage').textContent = '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ';
            }
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ Ruby.js –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                if (typeof window.Ruby !== 'undefined') {
                    updateStatus('Ruby.js —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –≥–æ—Ç–æ–≤!', 'success');
                    
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã
                    applyTestTranslations('ru');
                } else {
                    updateStatus('–û—à–∏–±–∫–∞: Ruby.js –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω', 'error');
                }
            }, 100);
        });
    </script>
</body>
</html>
